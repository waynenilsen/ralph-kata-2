model TodoTemplate {
  id          String   @id @default(cuid())
  name        String
  description String?
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
  tenantId    String
  createdBy   User     @relation("CreatedTemplates", fields: [createdById], references: [id])
  createdById String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  subtasks TemplateSubtask[]
  labels   TemplateLabel[]

  @@index([tenantId])
}

model TemplateSubtask {
  id         String       @id @default(cuid())
  title      String
  order      Int
  template   TodoTemplate @relation(fields: [templateId], references: [id], onDelete: Cascade)
  templateId String

  @@index([templateId])
}

model TemplateLabel {
  template   TodoTemplate @relation(fields: [templateId], references: [id], onDelete: Cascade)
  templateId String
  label      Label        @relation(fields: [labelId], references: [id], onDelete: Cascade)
  labelId    String

  @@id([templateId, labelId])
  @@index([labelId])
}
